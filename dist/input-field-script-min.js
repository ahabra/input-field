// input-field Web Component. Responsive input field with label and validation
// https://github.com/ahabra/input-field
// Copyright 2021 (C) Abdul Habra. Version 1.2.1.
// Apache License Version 2.0


var InputField=(()=>{var Be=Object.defineProperty;var ze=(e,t)=>{for(var n in t)Be(e,n,{get:t[n],enumerable:!0})};var Dn={};ze(Dn,{define:()=>jn});var Je=Object.defineProperty,L=(e,t)=>{for(var n in t)Je(e,n,{get:t[n],enumerable:!0})},b={};L(b,{add:()=>Ye,all:()=>B,classPresentIf:()=>tt,createElement:()=>Xe,createElements:()=>z,first:()=>Ke,getAttributes:()=>Qe,id:()=>Ge,removeElements:()=>et,setContent:()=>Ze,tag:()=>J});var v={};L(v,{equals:()=>X,forEachEntry:()=>W,has:()=>it,isDate:()=>H,isFunction:()=>G,isInteger:()=>rt,isNil:()=>nt,isNumber:()=>K,isRegExp:()=>Q,isString:()=>S});function nt(e){return e==null}function S(e){return y(e,"String")}function G(e){return y(e,"Function")}function H(e){return y(e,"Date")}function K(e){return y(e,"Number")?Number.isNaN(e)?!1:Number.isFinite(e):!S(e)||(e=e.trim(),e==="")?!1:!isNaN(e)}function rt(e){return K(e)?Number.isInteger(Number.parseFloat(e)):!1}function Q(e){return y(e,"RegExp")}function y(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function W(e,t){if(!(!e||!t)){if(Array.isArray(e)){e.forEach((n,r)=>{t(r,n)});return}Object.entries(e).forEach(n=>t(n[0],n[1]))}}function it(e,t){return!e||!t?!1:Object.prototype.hasOwnProperty.call(e,t)}function X(e,t){return e===t?!0:e===void 0||t===void 0?!1:st(e,t)}function st(e,t){return Y(e)||Y(t)?e===t:ut(e,t)}var ot=new Set(["boolean","number","bigint","string","symbol"]);function Y(e){return ot.has(typeof e)}function ut(e,t){return lt(e,t)?at(e,t)?!0:ct(e,t):!1}function lt(e,t){return Z(e)===Z(t)}function Z(e){return Object.prototype.toString.call(e)}function at(e,t){return H(e)&&H(t)?e.getTime()===t.getTime():!1}function ct(e,t){let n=Object.keys(e);return n.length!==Object.keys(t).length?!1:n.every(r=>X(e[r],t[r]))}function Ge(e,t=document){return M(t)&&(t=t.shadowRoot),t.getElementById(e)}function B(e,t=document){return M(t)&&(t=t.shadowRoot),Array.from(t.querySelectorAll(e))}function Ke(e,t=document){if(M(t)&&(t=t.shadowRoot),!e.includes("/"))return t.querySelector(e);let n=e.split("/").map(r=>r.trim()).filter(r=>r.length>0);for(let r of n)if(t=ft(r,t),t===null)break;return t}function ft(e,t){return e==="shadowRoot"||e==="shadow-root"?t.shadowRoot:t.querySelector(e)}function M(e){return e&&e.shadowRoot&&e.tagName.includes("-")}function Qe(e){let t={},n=e.attributes;if(!n||n.length===0)return t;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.value}return t}function z(e=""){if(e=e.trim(),!e)return[];let t=document.createElement("template");return t.innerHTML=e,Array.from(t.content.childNodes)}function Xe(e,t={},n=""){let r=J(e,t,n),i=z(r);return i.length===0?null:i[0]}function J(e,t={},n=""){if(!e)return"";let r=dt(t);return`<${e}${r}>${n}</${e}>`}function dt(e){let t=[];return W(e,(r,i)=>{t.push(`${r}="${i}"`)}),(t.length>0?" ":"")+t.join(" ")}var mt=new Set(["beforebegin","afterbegin","beforeend","afterend"]);function Ye(e,t,n="beforeend"){return n=n.toLowerCase(),mt.has(n)?(S(t)?e.insertAdjacentHTML(n,t):pt(e,t,n),!0):!1}function pt(e,t,n){Array.isArray(t)?t.forEach(r=>e.insertAdjacentElement(n,r)):e.insertAdjacentElement(n,t)}function Ze(e,...t){e.innerHTML="",e.append(...t)}function et(e,t=document){B(e,t).forEach(r=>{r.parentNode.removeChild(r)})}function tt(e,t,n){if(!e)return;let r=n?"add":"remove";e.classList[r](t)}var w={};L(w,{endsWith:()=>te,indexOf:()=>k,indexOfFirstMatch:()=>ht,indexOfLastMatch:()=>gt,isEmpty:()=>ie,removePrefix:()=>ne,removeSuffix:()=>re,removeSurrounding:()=>bt,replaceAll:()=>se,replaceTemplate:()=>wt,startsWith:()=>ee,substringAfter:()=>vt,substringBefore:()=>yt,trim:()=>P});function k(e,t,n=0,r=!1){return e?r?e.toLowerCase().indexOf(t.toLowerCase(),n):e.indexOf(t,n):-1}function ht(e,t){return!t||!e?-1:e.split("").findIndex(t)}function gt(e,t){if(!t||!e)return-1;let n=e.split("");for(let r=n.length;r>=0;--r)if(t(n[r],r))return r;return-1}function ee(e="",t=void 0,n=!1){if(n){let r=e.substring(0,t.length).toLowerCase();return t.toLowerCase()===r}return e.startsWith(t)}function te(e,t,n=!1){return n?e.toLowerCase().endsWith(t.toLowerCase()):e.endsWith(t)}function ne(e,t,n=!1){return ee(e,t,n)&&(e=e.substring(t.length)),e}function re(e,t,n=!1){return te(e,t,n)&&(e=e.substring(0,e.length-t.length)),e}function bt(e,t,n,r=!1){return re(ne(e,t,r),n,r)}function vt(e,t,n=!1){if(!t)return e;let r=k(e,t,0,n);return r<0?"":e.substring(r+t.length)}function yt(e,t,n=!1){if(!t)return"";let r=k(e,t,0,n);return r<0?e:e.substring(0,r)}function P(e){return ie(e)?"":(S(e)||(e=String(e)),e.trim(e))}function ie(e){return e==null||e===""}function se(e,t,n){if(G(String.prototype.replaceAll))return e.replaceAll(t,n);if(Q(t))return e.replace(t,n);let r=new RegExp(t,"g");return e.replace(r,n)}function wt(e="",t={},n="${",r="}"){return W(t,(i,s)=>{s!==void 0&&(i=n+i+r,e=se(e,i,s))}),e}var xt={};L(xt,{compareLines:()=>Et});function Et(e,t,{trim:n=!0,skipEmpty:r=!0,caseSensitive:i=!0}={trim:!0,skipEmpty:!0,caseSensitive:!0}){if(e=ue(e,{trim:n,skipEmpty:r}),t=ue(t,{trim:n,skipEmpty:r}),e.length!==t.length)return`t1 has ${e.length} lines(s) while t2 has ${t.length} line(s).`;for(let s=0;s<e.length;s++){let u=Lt(e[s],t[s],s,i);if(u.length>0)return u}return""}function Lt(e,t,n,r){let i=r?e:e.toLowerCase(),s=r?t:t.toLowerCase();return i!==s?`Line #${n+1} mismatch.
${e}
${t}`:""}function ue(e,{trim:t,skipEmpty:n}){return t&&(e=P(e)),e=e.split(`
`),t&&(e=e.map(r=>P(r))),n&&(e=e.filter(r=>!!r)),e}function I({obj:e,prop:t,sel:n,attr:r,root:i,onChange:s}){Tt(t),e=e||{};let u=e.hasOwnProperty(t)?e[t]:void 0;i=i||document;let c={};return Object.defineProperty(e,t,{get:()=>oe({prop:t,sel:n,attr:r,root:i,objNotBound:c}),set:d=>St({prop:t,value:d,root:i,sel:n,attr:r,objNotBound:c,onChange:s}),configurable:!0,enumerable:!0}),u!==void 0&&(console.info(`Property '${t}' already exists in object. Will override previous definition but retain old value of ${u}.`),e[t]=u),e}var T=e=>e.type==="checkbox",A=e=>e.type==="radio",le=e=>e.tagName.toLowerCase()==="select",ae=e=>"value"in e,ce=e=>new Set(Array.isArray(e)?e:[e]);function St({prop:e,value:t,root:n,sel:r,attr:i,objNotBound:s,onChange:u}){if(At({prop:e,value:t,root:n,sel:r,attr:i,objNotBound:s,onChange:u}),r){$t(n,r,t,i);return}s[e]=t}function At({prop:e,value:t,root:n,sel:r,attr:i,objNotBound:s,onChange:u}){if(!u)return;let c=oe({prop:e,root:n,sel:r,attr:i,objNotBound:s});c!==t&&u(c,t)}function oe({prop:e,root:t,sel:n,attr:r,objNotBound:i}){return n?Ct(t,n,r):i[e]}function Ct(e,t,n){let r=fe(e,t);if(r.length===0)return null;let i=r[0];if(n)return i.getAttribute(n);if(!ae(i))return i.innerHTML;if(T(i))return r.filter(s=>T(s)&&s.checked).map(s=>s.value==="on"?s.name:s.value);if(le(i))return[...i.querySelectorAll("option")].filter(u=>u.selected).map(u=>u.value);if(!(A(i)&&(i=r.filter(A).find(s=>s.checked),!i)))return i.value}function $t(e,t,n,r){let i=fe(e,t);if(i.length===0)return;let s=i[0];if(T(s)){let u=ce(n);i.filter(T).forEach(c=>c.checked=u.has(c.value)||u.has(c.name));return}if(le(s)){let u=ce(n);s.querySelectorAll("option").forEach(c=>c.selected=u.has(c.value));return}if(A(s)){i.filter(A).forEach(u=>u.checked=u.value===n);return}i.forEach(u=>Ot(u,n,r))}function Ot(e,t,n){n?e.setAttribute(n,t):ae(e)?e.value=t:e.innerHTML=t}function fe(e,t){let n=e.querySelectorAll(t);return n.length===0&&console.warn(`No elements found matching selector ${t}`),[...n]}function Tt(e){if(typeof e!="string"||e.length===0)throw"'prop' argument must be a String defining the name a property."}function he({nameWithDash:e,html:t,css:n,display:r,propertyList:i,actionList:s,eventHandlerList:u}){if(customElements.get(e))return!1;let c=class extends HTMLElement{constructor(){super();let m=this;Ht(this,t,n,r),this.wi={},this.wi.properties=Rt(this,i),this.wi.actions=Nt(this,s),qt(this,u),this.wi.addProperty=function(d,g,q,Ue,_e){let je={name:d,value:g,sel:q,attr:Ue,onChange:_e};de(m.wi.properties,je,m)},this.wi.addAction=(d,g)=>me(m,m.wi.actions,d,g),this.wi.addEventListener=(d,g,q)=>pe(m,{sel:d,eventName:g,listener:q})}};return customElements.define(e,c),!0}function Rt(e,t){let n={};return Wt(t)&&t.forEach(r=>de(n,r,e)),n}function de(e,t,n){let r=Mt(t,n);I({obj:e,prop:t.name,sel:t.sel,attr:t.attr,root:n.shadowRoot,onChange:r}),t.value!==void 0&&(e[t.name]=t.value)}function Mt(e,t){if(!!e.onChange)return(n,r)=>e.onChange(t,n,r)}function Wt(e){if(!e)return!1;if(!Array.isArray(e))throw"propertyList must be an array of {name, value, [sel], [attr]} objects";return!0}function Nt(e,t){let n={};return t&&t.forEach(r=>{me(e,n,r.name,r.action)}),n}function me(e,t,n,r){!v.isString(n)||!v.isFunction(r)||(t[n]=r.bind(e))}function qt(e,t){if(!!t){if(!Array.isArray(t))throw"eventHandlerList must be an array of {sel, eventName, listener} objects";t.forEach(n=>pe(e,n))}}function pe(e,{sel:t,eventName:n,listener:r}){b.all(t,e.shadowRoot).forEach(s=>{s.addEventListener(n,u=>{r(u,e)})})}function Ht(e,t,n,r){t=kt(e,t);let i=e.attachShadow({mode:"open"}),s=b.createElements(Pt(n,r)+t);i.append(...s)}function kt(e,t){return v.isFunction(t)?t(e):t}function Pt(e,t){return Ft(t)+It(e)}function It(e){return e=w.trim(e),e.length===0?"":(w.startsWith(e,"<style>",!1)||(e=b.tag("style",{},e)),e)}function Ft(e){return e=w.trim(e),e.length===0?"":`
  <style>
    :host { display: ${e};}
    :host([hidden]) {display: none;}
  </style>
  `}var Dt=Object.defineProperty,$=(e,t)=>{for(var n in t)Dt(e,n,{get:t[n],enumerable:!0})},l={};$(l,{add:()=>Bt,all:()=>ge,classPresentIf:()=>Gt,createElement:()=>jt,createElements:()=>be,first:()=>Ut,getAttributes:()=>_t,id:()=>Vt,removeElements:()=>Jt,setContent:()=>zt,tag:()=>ve});var f={};$(f,{equals:()=>Ee,forEachEntry:()=>D,has:()=>Xt,isDate:()=>F,isFunction:()=>ye,isInteger:()=>Qt,isNil:()=>Kt,isNumber:()=>we,isRegExp:()=>xe,isString:()=>C});function Kt(e){return e==null}function C(e){return x(e,"String")}function ye(e){return x(e,"Function")}function F(e){return x(e,"Date")}function we(e){return x(e,"Number")?Number.isNaN(e)?!1:Number.isFinite(e):!C(e)||(e=e.trim(),e==="")?!1:!isNaN(e)}function Qt(e){return we(e)?Number.isInteger(Number.parseFloat(e)):!1}function xe(e){return x(e,"RegExp")}function x(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function D(e,t){if(!(!e||!t)){if(Array.isArray(e)){e.forEach((n,r)=>{t(r,n)});return}Object.entries(e).forEach(n=>t(n[0],n[1]))}}function Xt(e,t){return!e||!t?!1:Object.prototype.hasOwnProperty.call(e,t)}function Ee(e,t){return e===t?!0:e===void 0||t===void 0?!1:Yt(e,t)}function Yt(e,t){return Le(e)||Le(t)?e===t:Zt(e,t)}var en=new Set(["boolean","number","bigint","string","symbol"]);function Le(e){return en.has(typeof e)}function Zt(e,t){return tn(e,t)?nn(e,t)?!0:rn(e,t):!1}function tn(e,t){return Se(e)===Se(t)}function Se(e){return Object.prototype.toString.call(e)}function nn(e,t){return F(e)&&F(t)?e.getTime()===t.getTime():!1}function rn(e,t){let n=Object.keys(e);return n.length!==Object.keys(t).length?!1:n.every(r=>Ee(e[r],t[r]))}function Vt(e,t=document){return V(t)&&(t=t.shadowRoot),t.getElementById(e)}function ge(e,t=document){return V(t)&&(t=t.shadowRoot),Array.from(t.querySelectorAll(e))}function Ut(e,t=document){if(V(t)&&(t=t.shadowRoot),!e.includes("/"))return t.querySelector(e);let n=e.split("/").map(r=>r.trim()).filter(r=>r.length>0);for(let r of n)if(t=sn(r,t),t===null)break;return t}function sn(e,t){return e==="shadowRoot"||e==="shadow-root"?t.shadowRoot:t.querySelector(e)}function V(e){return e&&e.shadowRoot&&e.tagName.includes("-")}function _t(e){let t={},n=e.attributes;if(!n||n.length===0)return t;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.value}return t}function be(e=""){if(e=e.trim(),!e)return[];let t=document.createElement("template");return t.innerHTML=e,Array.from(t.content.childNodes)}function jt(e,t={},n=""){let r=ve(e,t,n),i=be(r);return i.length===0?null:i[0]}function ve(e,t={},n=""){if(!e)return"";let r=un(t);return`<${e}${r}>${n}</${e}>`}function un(e){let t=[];return D(e,(r,i)=>{t.push(`${r}="${i}"`)}),(t.length>0?" ":"")+t.join(" ")}var on=new Set(["beforebegin","afterbegin","beforeend","afterend"]);function Bt(e,t,n="beforeend"){return n=n.toLowerCase(),on.has(n)?(C(t)?e.insertAdjacentHTML(n,t):ln(e,t,n),!0):!1}function ln(e,t,n){Array.isArray(t)?t.forEach(r=>e.insertAdjacentElement(n,r)):e.insertAdjacentElement(n,t)}function zt(e,...t){e.innerHTML="",e.append(...t)}function Jt(e,t=document){ge(e,t).forEach(r=>{r.parentNode.removeChild(r)})}function Gt(e,t,n){if(!e)return;let r=n?"add":"remove";e.classList[r](t)}var o={};$(o,{endsWith:()=>Ae,indexOf:()=>U,indexOfFirstMatch:()=>an,indexOfLastMatch:()=>cn,isEmpty:()=>O,removePrefix:()=>$e,removeSuffix:()=>Ce,removeSurrounding:()=>fn,replaceAll:()=>Oe,replaceTemplate:()=>pn,startsWith:()=>Te,strip:()=>bn,stripEnd:()=>gn,stripStart:()=>hn,substringAfter:()=>dn,substringBefore:()=>mn,trim:()=>_});function U(e,t,n=0,r=!1){return e?r?e.toLowerCase().indexOf(t.toLowerCase(),n):e.indexOf(t,n):-1}function an(e,t){return!t||!e?-1:e.split("").findIndex(t)}function cn(e,t){if(!t||!e)return-1;let n=e.split("");for(let r=n.length;r>=0;--r)if(t(n[r],r))return r;return-1}function Te(e="",t=void 0,n=!1){if(n){let r=e.substring(0,t.length).toLowerCase();return t.toLowerCase()===r}return e.startsWith(t)}function Ae(e,t,n=!1){return n?e.toLowerCase().endsWith(t.toLowerCase()):e.endsWith(t)}function $e(e,t,n=!1){return Te(e,t,n)&&(e=e.substring(t.length)),e}function Ce(e,t,n=!1){return Ae(e,t,n)&&(e=e.substring(0,e.length-t.length)),e}function fn(e,t,n,r=!1){return Ce($e(e,t,r),n,r)}function dn(e,t,n=!1){if(!t)return e;let r=U(e,t,0,n);return r<0?"":e.substring(r+t.length)}function mn(e,t,n=!1){if(!t)return"";let r=U(e,t,0,n);return r<0?e:e.substring(0,r)}function _(e){return O(e)?"":(C(e)||(e=String(e)),e.trim(e))}function O(e){return e==null||e===""}function Oe(e,t,n){if(ye(String.prototype.replaceAll))return e.replaceAll(t,n);if(xe(t))return e.replace(t,n);let r=new RegExp(t,"g");return e.replace(r,n)}function pn(e="",t={},n="${",r="}"){return D(t,(i,s)=>{s!==void 0&&(i=n+i+r,e=Oe(e,i,s))}),e}function hn(e,t=""){return O(e)?"":t?Re(e,new Set(Array.from(t))):e}function Re(e,t){for(let n=0;n<e.length;n++)if(!t.has(e.charAt(n)))return e.substring(n);return""}function gn(e,t=""){return O(e)?"":t?Ne(e,new Set(Array.from(t))):e}function Ne(e,t){for(let n=e.length-1;n>=0;n--)if(!t.has(e.charAt(n)))return e.substring(0,n+1);return""}function bn(e,t=""){if(e===void 0||e==="")return"";if(!t)return e;let n=new Set(Array.from(t));return e=Re(e,n),e?Ne(e,n):""}var vn={};$(vn,{compareLines:()=>yn});function yn(e,t,{trim:n=!0,skipEmpty:r=!0,caseSensitive:i=!0}={trim:!0,skipEmpty:!0,caseSensitive:!0}){if(e=qe(e,{trim:n,skipEmpty:r}),t=qe(t,{trim:n,skipEmpty:r}),e.length!==t.length)return`t1 has ${e.length} lines(s) while t2 has ${t.length} line(s).`;for(let s=0;s<e.length;s++){let u=wn(e[s],t[s],s,i);if(u.length>0)return u}return""}function wn(e,t,n,r){let i=r?e:e.toLowerCase(),s=r?t:t.toLowerCase();return i!==s?`Line #${n+1} mismatch.
${e}
${t}`:""}function qe(e,{trim:t,skipEmpty:n}){return t&&(e=_(e)),e=e.split(`
`),t&&(e=e.map(r=>_(r))),n&&(e=e.filter(r=>!!r)),e}var a=class{constructor(t="",n,r){this.name=t.replace(/[ \\.]/g,"-").toLowerCase(),this.message=n,this.validator=r}isValid(t){return this.validator(String(t))}toHtml(){return o.isEmpty(this.message)?"":`<li class="validation-${this.name}">${this.message}</li>
`}static createRule(t,n,r,i){return n=o.replaceAll(n,"%v",i),new a(t,n,r)}static email(t="Must be a valid email address"){let n=r=>/\S+@\S+\.\S+/.test(r);return new a("email",t,n)}static required(t,n="Required Field"){let r=i=>!!i;return new a("required",n,r)}static minlength(t,n="Minimum Length is %v"){let r=i=>(i?i.length:0)>=t;return a.createRule("minlength",n,r,t)}static pattern(t,n="Must satisfy the pattern %v"){let r=i=>new RegExp(t).test(i);return a.createRule("pattern",n,r,t)}static min(t,n="Minimum value of %v"){t=Number(t)||0;let r=i=>(i=Number(i)||0,i>=t);return a.createRule("minValue",n,r,t)}static max(t,n="Maximum value of %v"){t=Number(t)||0;let r=i=>(i=Number(i)||0,i<=t);return a.createRule("max",n,r,t)}static isNumber(t="Must be a valid number"){let n=r=>f.isNumber(r);return new a("isNumber",t,n)}static isInteger(t="Must be a valid whole number"){let n=r=>f.isInteger(r);return new a("isInteger",t,n)}static set(t,n="Value must be one of [%v]"){let r=new Set(t.split(",").map(s=>s.trim().toLowerCase())),i=s=>s===""||r.has(s.toLowerCase());return a.createRule("set",n,i,t)}};var E=class{constructor(t){this.rules=[],this.addAll(t)}add(t){return En(this.rules,t.name)?!1:(this.rules.push(t),!0)}addAll(t){!t||t.forEach(n=>this.add(n))}validate(t,n){this.rules.forEach(r=>{let i=r.isValid(t);n(i,r.name)})}toHtml(){return this.rules.map(t=>t.toHtml()).join("")}static createFromAttributes(t){let n=[];return xn(n,t),f.forEachEntry(t,(r,i)=>{if(!o.isEmpty(i)&&f.has(a,r)){let s=t[r+"-message"],u=a[r](i,s);n.push(u)}}),new E(n)}};function xn(e,t){switch(t.type){case"email":return e.push(a.email(t["email-message"]));case"number":return e.push(a.isNumber(t["number-message"]));case"integer":return e.push(a.isInteger(t["integer-message"]));case"set":return e.push(a.set(t.options,t["set-message"]))}}function En(e,t){return!!e.find(r=>r.name===t)}var He=`\${cssFile}

<div class="input-field">
  <label class="label">
    <span class="superlabel \${required} \${tooltip}">
      \${label} \${tooltipIcon}
      <span class="tooltip-text">\${tooltipText}</span>
    </span>
    <span class="sublabel">\${sublabel}</span>
  </label>

  \${input}

  <footer>
    <ul class="rules" style="display:\${showrules};">\${rules}</ul>
  </footer>
</div>
`;var Ln=`
 <input type="{type}" class="input" value="{value}"
  {required} {minlength} {maxlength} {pattern}>
`,R="required";function We(e){let t={type:Sn(e),required:N(e,R),minlength:N(e,"minlength"),maxlength:N(e,"maxlength"),pattern:N(e,"pattern"),value:e.value||""};return o.replaceTemplate(Ln,t,"{")}function Sn(e){let t=o.trim(e.type).toLowerCase();return t?t==="integer"?"number":t:"text"}function N(e,t){let n=e[t];return n?t===R&&n===R?R:`${t}="${n}"`:""}function p(e,t,...n){return!Tn(e)||(e=JSON.parse(e),!An(e,t,...n))?!1:e}function Tn(e){return!f.isString(e)||o.isEmpty(e)?!1:(e=e.trim(),e.length!==0)}function An(e,t,...n){if(!Array.isArray(e.options)||e.options.length===0)return!1;let r=n.find(i=>!f.has(e,i));if(r)throw`${t} definition requires ${r} attribute`;return!0}function h(e,{label:t,value:n}){if(t===void 0&&n===void 0)throw`${e} definition requires at least a label or value`}var $n=`
<label class="radio">
  <input type="radio" name="{name}" {id} value="{value}"{checked}>
  <span class="radio-label">{label}</span>
</label>
`;function Me(e){return e?Cn(e.innerHTML):""}function Cn(e){return e=p(e,"Radio","name"),e?`
<div class="radio-buttons">
${On(e)}
</div>
`:""}function On(e){let t=e.name,n=e.flow==="vertical"?`<br>
`:`
`;return e.options.map(r=>Rn(t,r)).join(n)}function Rn(e,t){h("Radio",t);let n={name:e,checked:t.checked?" checked":"",id:t.id?`id="${t.id}"`:"",value:t.value||t.label,label:t.label||t.value};return o.replaceTemplate($n.trim(),n,"{")}var Nn=`
<label class="checkbox">
  <input type="checkbox" {name} {id} value="{value}"{checked}>
  <span class="checkbox-label">{label}</span>
</label>
`;function ke(e){return e?qn(e.innerHTML):""}function qn(e){return e=p(e,"Checkbox"),e?`
<div class="checkbox-buttons">
${Hn(e)}
</div>
`:""}function Hn(e){let t=e.flow==="vertical"?`<br>
`:`
`;return e.options.map(n=>Wn(n)).join(t)}function Wn(e){h("Checkbox",e);let t={name:e.name?`name="${e.name}"`:"",checked:e.checked?" checked":"",id:e.id?`id="${e.id}"`:"",value:e.value||e.label,label:e.label||e.value};return o.replaceTemplate(Nn.trim(),t,"{")}var j={select:'<select{name}{id}{size}{multiple} class="{widgetType}{multiple}">{options}</select>',group:'<optgroup label="{label}">{options}</optgroup>',option:"<option{disabled}{selected}{value}>{label}</option>"};function Pe(e){return e?Mn(e.innerHTML):""}function Mn(e){if(e=p(e,"Listbox"),!e)return"";let t={name:e.name?` name="${e.name}"`:"",id:e.id?` id="${e.id}"`:"",size:e.size?` size="${e.size}"`:"",widgetType:kn(e),multiple:e.multiple?" multiple":"",options:Ie(e.options)};return o.replaceTemplate(j.select,t,"{")}function kn({multiple:e,size:t}){return e||t>1?"listbox":"combobox"}function Pn(e){let t={label:e.label,options:Ie(e.options)};return o.replaceTemplate(j.group,t,"{")}function Ie(e){return Array.isArray(e)?e.map(n=>n.options?Pn(n):In(n)).join(`
`):""}function In(e){h("Listbox",e);let t=e.value||e.label,n={disabled:e.disabled?" disabled":"",selected:e.selected?" selected":"",label:e.label||e.value,value:` value="${t}"`};return o.replaceTemplate(j.option,n,"{")}function Fe(e,t){e.preventDefault();let n=l.first("select",t),r=n.scrollTop;Fn(e.target),t.wi.actions._runValueChangeListeners(e.target.value),setTimeout(()=>{n.scrollTop=r})}function Fn(e){e.selected=!e.selected,e.parentElement.focus()}function De(e,t){let n=e.tooltip;n?(t.tooltip="tooltip",t.tooltipIcon='<span class="circle">?</span>',t.tooltipText=n):(t.tooltip="",t.tooltipIcon="",t.tooltipText="")}function jn(e=""){he({nameWithDash:"input-field",html:t=>{let n=Vn(t);return t.validationRules=E.createFromAttributes(n),t.valueChangeListeners=[],Un(t,n,e)},propertyList:[{name:"value",sel:"input, select",onChange:(t,n,r)=>{Ve(t,r),t.wi.actions._runValueChangeListeners(r)}}],eventHandlerList:[{sel:"input, select",eventName:"input",listener:(t,n)=>{let r=t.target.value;Ve(n,r),n.wi.actions._runValueChangeListeners(r)}},{sel:"label .tooltip",eventName:"click",listener:(t,n)=>{l.first("label .tooltip-text",n).classList.toggle("show")}},{sel:"select.listbox.multiple option",eventName:"mousedown",listener:(t,n)=>Fe(t,n)}],actionList:[{name:"addRule",action:function(t,n,r){let i=new a(t,n,r);!this.validationRules.add(i)||_n(this,i)}},{name:"getRuleValidState",action:function(t){let n=l.first("footer ul.rules",this),r=l.first(`li.validation-${t}`,n);return r===null?null:!r.classList.contains("bad")}},{name:"setRuleValidState",action:function(t,n){let r=l.first("footer ul.rules",this),i=l.first(`li.validation-${t}`,r);l.classPresentIf(i,"bad",!n);let s=l.first("input",this),u=l.first("li.bad",r);l.classPresentIf(s,"bad",u!==null)}},{name:"addValueChangeListener",action:function(t){this.valueChangeListeners.push(t)}},{name:"_runValueChangeListeners",action:function(t){let n=this;n.valueChangeListeners.forEach(r=>{r(n,t)})}}]})}function Vn(e){let t=l.getAttributes(e),n={};f.forEachEntry(t,(i,s)=>{n[i.toLowerCase()]=s});let r=o.trim(n.showrules).toLowerCase();return n.showrules=r===""||r==="true",n}function Un(e,t,n){let i={input:Bn(e,t),cssFile:zn(n),label:t.label,sublabel:Jn(t),required:Gn(t,"required"),showrules:t.showrules?"":"none",rules:e.validationRules.toHtml()};return De(t,i),o.replaceTemplate(He,i)}function Bn(e,t){let n=Kn(t);return n==="radio"?Me(e):n==="checkbox"?ke(e):n==="listbox"?Pe(e):We(t)}function Kn(e){let t=o.trim(e.type).toLowerCase();return t?t==="integer"?"number":t:"text"}function zn(e){return o.isEmpty(e)?"":`<link rel="stylesheet" type="text/css" href="${e}">`}function Jn(e){let t=e.sublabel;return t?`<br>${t}`:""}function Gn(e,t){let n=e[t];return n?n==="required"?n:` ${t}="${n}"`:""}function Ve(e,t){let n=l.first("footer ul.rules",e),r=!0;e.validationRules.validate(t,(s,u)=>{let c=l.first(`li.validation-${u}`,n);l.classPresentIf(c,"bad",!s),r=r&&s});let i=l.first("input",e);l.classPresentIf(i,"bad",!r)}function _n(e,t){let n=l.first("footer ul.rules",e);l.add(n,t.toHtml())}return Dn;})();
//# sourceMappingURL=input-field-script-min.js.map
