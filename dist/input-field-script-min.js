// input-field Web Component. Responsive input field with label and validation
// https://github.com/ahabra/input-field
// Copyright 2021 (C) Abdul Habra. Version 1.7.2.
// Apache License Version 2.0


var InputField=(()=>{var $=Object.defineProperty;var Ne=Object.getOwnPropertyDescriptor;var He=Object.getOwnPropertyNames;var qe=Object.prototype.hasOwnProperty;var Ve=(e,t)=>{for(var r in t)$(e,r,{get:t[r],enumerable:!0})},ke=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of He(t))!qe.call(e,i)&&i!==r&&$(e,i,{get:()=>t[i],enumerable:!(n=Ne(t,i))||n.enumerable});return e};var We=e=>ke($({},"__esModule",{value:!0}),e);var Tr={};Ve(Tr,{define:()=>gr});var Ie=Object.defineProperty,A=(e,t)=>{for(var r in t)Ie(e,r,{get:t[r],enumerable:!0})},a={};A(a,{add:()=>tt,all:()=>G,classPresentIf:()=>st,createElement:()=>Ze,createElements:()=>K,first:()=>Ke,getAttributes:()=>Ye,id:()=>Ge,removeElements:()=>it,setContent:()=>nt,tag:()=>Q});var l={};A(l,{equals:()=>_,forEachEntry:()=>q,has:()=>Ue,isDate:()=>N,isFunction:()=>z,isInteger:()=>Pe,isNil:()=>Me,isNumber:()=>B,isRegExp:()=>J,isString:()=>S});function Me(e){return e==null}function S(e){return y(e,"String")}function z(e){return y(e,"Function")}function N(e){return y(e,"Date")}function B(e){return y(e,"Number")?Number.isNaN(e)?!1:Number.isFinite(e):!S(e)||(e=e.trim(),e==="")?!1:!isNaN(e)}function Pe(e){return B(e)?Number.isInteger(Number.parseFloat(e)):!1}function J(e){return y(e,"RegExp")}function y(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function q(e,t){if(!(!e||!t)){if(Array.isArray(e)){e.forEach((r,n)=>{t(n,r)});return}Object.entries(e).forEach(r=>t(r[0],r[1]))}}function Ue(e,t){return!e||!t?!1:Object.prototype.hasOwnProperty.call(e,t)}function _(e,t){return e===t?!0:e===void 0||t===void 0?!1:Fe(e,t)}function Fe(e,t){return U(e)||U(t)?e===t:ze(e,t)}var De=new Set(["boolean","number","bigint","string","symbol"]);function U(e){return De.has(typeof e)}function ze(e,t){return Be(e,t)?Je(e,t)?!0:_e(e,t):!1}function Be(e,t){return F(e)===F(t)}function F(e){return Object.prototype.toString.call(e)}function Je(e,t){return N(e)&&N(t)?e.getTime()===t.getTime():!1}function _e(e,t){let r=Object.keys(e);return r.length!==Object.keys(t).length?!1:r.every(n=>_(e[n],t[n]))}function Ge(e,t=document){return V(t)&&(t=t.shadowRoot),t.getElementById(e)}function G(e,t=document){return V(t)&&(t=t.shadowRoot),Array.from(t.querySelectorAll(e))}function Ke(e,t=document){return V(t)&&(t=t.shadowRoot),e.includes("/")?Qe(e,t):t.querySelector(e)}function Qe(e,t){let r=e.split("/").map(n=>n.trim()).filter(n=>n.length>0);for(let n of r)if(t=Xe(n,t),t===null)break;return t}function Xe(e,t){return e==="shadowRoot"||e==="shadow-root"?t.shadowRoot:t.querySelector(e)}function V(e){return e&&e.shadowRoot&&e.tagName.includes("-")}function Ye(e){let t={},r=e.attributes;if(!r||r.length===0)return t;for(let n=0;n<r.length;n++){let i=r[n];t[i.name]=i.value}return t}function K(e=""){if(e=e.trim(),!e)return[];let t=document.createElement("template");return t.innerHTML=e,Array.from(t.content.childNodes)}function Ze(e,t={},r=""){let n=Q(e,t,r),i=K(n);return i.length===0?null:i[0]}function Q(e,t={},r=""){if(!e)return"";let n=je(t);return`<${e}${n}>${r}</${e}>`}function je(e){let t=[];return q(e,(n,i)=>{t.push(`${n}="${i}"`)}),(t.length>0?" ":"")+t.join(" ")}var et=new Set(["beforebegin","afterbegin","beforeend","afterend"]);function tt(e,t,r="beforeend"){return r=r.toLowerCase(),et.has(r)?(S(t)?e.insertAdjacentHTML(r,t):rt(e,t,r),!0):!1}function rt(e,t,r){Array.isArray(t)?t.forEach(n=>e.insertAdjacentElement(r,n)):e.insertAdjacentElement(r,t)}function nt(e,...t){e.innerHTML="",e.append(...t)}function it(e,t=document){G(e,t).forEach(n=>{n.parentNode.removeChild(n)})}function st(e,t,r){if(!e)return;let n=r?"add":"remove";e.classList[n](t)}var u={};A(u,{endsWith:()=>Y,indexOf:()=>k,indexOfFirstMatch:()=>ot,indexOfLastMatch:()=>ut,isEmpty:()=>E,removePrefix:()=>Z,removeSuffix:()=>j,removeSurrounding:()=>at,replaceAll:()=>ee,replaceTemplate:()=>ft,startsWith:()=>X,strip:()=>pt,stripEnd:()=>mt,stripStart:()=>dt,substringAfter:()=>lt,substringBefore:()=>ct,trim:()=>H});function k(e,t,r=0,n=!1){return e?n?e.toLowerCase().indexOf(t.toLowerCase(),r):e.indexOf(t,r):-1}function ot(e,t){return!t||!e?-1:e.split("").findIndex(t)}function ut(e,t){if(!t||!e)return-1;let r=e.split("");for(let n=r.length;n>=0;--n)if(t(r[n],n))return n;return-1}function X(e="",t=void 0,r=!1){if(r){let n=e.substring(0,t.length).toLowerCase();return t.toLowerCase()===n}return e.startsWith(t)}function Y(e,t,r=!1){return r?e.toLowerCase().endsWith(t.toLowerCase()):e.endsWith(t)}function Z(e,t,r=!1){return X(e,t,r)&&(e=e.substring(t.length)),e}function j(e,t,r=!1){return Y(e,t,r)&&(e=e.substring(0,e.length-t.length)),e}function at(e,t,r,n=!1){return j(Z(e,t,n),r,n)}function lt(e,t,r=!1){if(!t)return e;let n=k(e,t,0,r);return n<0?"":e.substring(n+t.length)}function ct(e,t,r=!1){if(!t)return"";let n=k(e,t,0,r);return n<0?e:e.substring(0,n)}function H(e){return E(e)?"":(S(e)||(e=String(e)),e.trim(e))}function E(e){return e==null||e===""}function ee(e,t,r){if(z(String.prototype.replaceAll))return e.replaceAll(t,r);if(J(t))return e.replace(t,r);let n=new RegExp(t,"g");return e.replace(n,r)}function ft(e="",t={},r="${",n="}"){return q(t,(i,s)=>{s!==void 0&&(i=r+i+n,e=ee(e,i,s))}),e}function dt(e,t=""){return E(e)?"":t?te(e,new Set(Array.from(t))):e}function te(e,t){for(let r=0;r<e.length;r++)if(!t.has(e.charAt(r)))return e.substring(r);return""}function mt(e,t=""){return E(e)?"":t?re(e,new Set(Array.from(t))):e}function re(e,t){for(let r=e.length-1;r>=0;r--)if(!t.has(e.charAt(r)))return e.substring(0,r+1);return""}function pt(e,t=""){if(e===void 0||e==="")return"";if(!t)return e;let r=new Set(Array.from(t));return e=te(e,r),e?re(e,r):""}var ht={};A(ht,{compareLines:()=>gt});function gt(e,t,{trim:r=!0,skipEmpty:n=!0,caseSensitive:i=!0}={trim:!0,skipEmpty:!0,caseSensitive:!0}){return e=D(e,{trim:r,skipEmpty:n}),t=D(t,{trim:r,skipEmpty:n}),e.length!==t.length?`t1 has ${e.length} lines(s) while t2 has ${t.length} line(s).`:bt(e,t,i)}function bt(e,t,r){for(let n=0;n<e.length;n++){let i=yt(e[n],t[n],n,r);if(i.length>0)return i}return""}function yt(e,t,r,n){let i=n?e:e.toLowerCase(),s=n?t:t.toLowerCase();return i!==s?`Line #${r+1} mismatch.
${e}
${t}`:""}function D(e,{trim:t,skipEmpty:r}){return t&&(e=H(e)),e=e.split(`
`),t&&(e=e.map(n=>H(n))),r&&(e=e.filter(n=>!!n)),e}function W({obj:e={},prop:t,sel:r,attr:n,root:i=document,getter:s,setter:o,onChange:c}){Tt(t),wt(e,t);let x={};return s||(s=()=>xt({prop:t,sel:r,attr:n,root:i,objNotBound:x})),o||(o=d=>At({prop:t,value:d,root:i,sel:r,attr:n,objNotBound:x})),vt({obj:e,prop:t,getter:s,setter:o,onChange:c})}function vt({obj:e,prop:t,getter:r,setter:n,onChange:i}){return Object.defineProperty(e,t,{get:()=>r(),set:o=>{if(i){let c=r(t);c!==o&&i(c,o)}n(o)},configurable:!0,enumerable:!0}),e}var L=e=>e.type==="checkbox",T=e=>e.type==="radio",ie=e=>e.nodeName.toLowerCase()==="select",se=e=>e.nodeName.toLowerCase()==="input-field",oe=e=>"value"in e,ne=e=>new Set(Array.isArray(e)?e:[e]);function wt(e,t){let r=e[t];return r!==void 0&&(console.info(`Property '${t}' already exists in object. Will override previous definition but retain old value of ${r}.`),e[t]=r),r}function xt({prop:e,root:t,sel:r,attr:n,objNotBound:i}){return r?St(t,r,n):i[e]}function At({prop:e,value:t,root:r,sel:n,attr:i,objNotBound:s}){if(n){Et(r,n,t,i);return}s[e]=t}function St(e,t,r){let n=ue(e,t);if(n.length===0)return null;let i=n[0];if(r)return i.getAttribute(r);if(!oe(i))return i.innerHTML;if(L(i))return n.filter(s=>L(s)&&s.checked).map(s=>s.value==="on"?s.name:s.value);if(ie(i))return[...i.querySelectorAll("option")].filter(o=>o.selected).map(o=>o.value);if(!(T(i)&&(i=n.filter(T).find(s=>s.checked),!i)))return se(i)?i.getAttribute("value"):i.value}function Et(e,t,r,n){let i=ue(e,t);if(i.length===0)return;let s=i[0];if(L(s)){let o=ne(r);i.filter(L).forEach(c=>c.checked=o.has(c.value)||o.has(c.name));return}if(ie(s)){let o=ne(r);s.querySelectorAll("option").forEach(c=>c.selected=o.has(c.value));return}if(T(s)){i.filter(T).forEach(o=>o.checked=o.value===r);return}i.forEach(o=>Lt(o,r,n))}function Lt(e,t,r){r?e.setAttribute(r,t):oe(e)?e.value=t:se(e)?e.setAttribute("value",t):e.innerHTML=t}function ue(e,t){let r=e.querySelectorAll(t);return r.length===0&&console.warn(`No elements found matching selector ${t}`),[...r]}function Tt(e){if(typeof e!="string"||e.length===0)throw"'prop' argument must be a String defining the name a property."}function ae({nameWithDash:e,html:t,css:r,styleSheets:n,display:i,propertyList:s,actionList:o,eventHandlerList:c}){if(customElements.get(e))return!1;let x=class extends HTMLElement{constructor(){super();let d=this;Ht(this,t,r,n,i),this.wi={},this.wi.properties=Ct(this,s),this.wi.actions=$t(this,o),Nt(this,c),this.wi.addProperty=function(g,b,R,Oe,Re){let $e={name:g,value:b,sel:R,attr:Oe,onChange:Re};le(d.wi.properties,$e,d)},this.wi.addAction=(g,b)=>ce(d,d.wi.actions,g,b),this.wi.addEventListener=(g,b,R)=>fe(d,{sel:g,eventName:b,listener:R})}};return customElements.define(e,x),!0}function Ct(e,t){let r={};return Rt(t)&&t.forEach(n=>le(r,n,e)),r}function le(e,t,r){let n=Ot(t,r);W({obj:e,prop:t.name,sel:t.sel,attr:t.attr,root:r.shadowRoot,onChange:n}),t.value!==void 0&&(e[t.name]=t.value)}function Ot(e,t){if(e.onChange)return(r,n)=>e.onChange(t,r,n)}function Rt(e){if(!e)return!1;if(!Array.isArray(e))throw"propertyList must be an array of {name, value, [sel], [attr]} objects";return!0}function $t(e,t){let r={};return t&&t.forEach(n=>{ce(e,r,n.name,n.action)}),r}function ce(e,t,r,n){!l.isString(r)||!l.isFunction(n)||(t[r]=n.bind(e))}function Nt(e,t){if(t){if(!Array.isArray(t))throw"eventHandlerList must be an array of {sel, eventName, listener} objects";t.forEach(r=>fe(e,r))}}function fe(e,{sel:t,eventName:r,listener:n}){a.all(t,e.shadowRoot).forEach(s=>{s.addEventListener(r,o=>{n(o,e)})})}function Ht(e,t,r,n,i){t=qt(e,t);let s=e.attachShadow({mode:"open"}),o=a.createElements(Vt(r,i)+t);s.append(...o),Array.isArray(n)&&n.length>0&&s.adoptedStyleSheets.push(...n)}function qt(e,t){return l.isFunction(t)?t(e):t}function Vt(e,t){return Wt(t)+kt(e)}function kt(e){return e=u.trim(e),e.length===0?"":(u.startsWith(e,"<style>",!1)||(e=a.tag("style",{},e)),e)}function Wt(e){return e=u.trim(e),e.length===0?"":`
  <style>
    :host { display: ${e};}
    :host([hidden]) {display: none;}
  </style>
  `}var f=class e{constructor(t="",r,n){this.name=t.replace(/[ \\.]/g,"-").toLowerCase(),this.message=r,this.validator=n}isValid(t){return this.name==="required"&&t===void 0?!1:this.validator(String(t))}toHtml(){return u.isEmpty(this.message)?"":`<li class="validation-${this.name}">${this.message}</li>
`}static createRule(t,r,n,i){return r=u.replaceAll(r,"%v",i),new e(t,r,n)}static email(t="Must be a valid email address"){let r=n=>/\S+@\S+\.\S+/.test(n);return new e("email",t,r)}static required(t,r="Required Field"){if(t=t.toLowerCase(),t==="true"||t==="required"){let n=i=>!!i;return new e("required",r,n)}return null}static minlength(t,r="Minimum Length is %v"){let n=i=>(i?i.length:0)>=t;return e.createRule("minlength",r,n,t)}static pattern(t,r="Must satisfy the pattern %v"){let n=i=>new RegExp(t).test(i);return e.createRule("pattern",r,n,t)}static min(t,r="Minimum value of %v"){t=Number(t)||0;let n=i=>(i=Number(i)||0,i>=t);return e.createRule("minValue",r,n,t)}static max(t,r="Maximum value of %v"){t=Number(t)||0;let n=i=>(i=Number(i)||0,i<=t);return e.createRule("max",r,n,t)}static isNumber(t="Must be a valid number"){let r=n=>l.isNumber(n);return new e("isNumber",t,r)}static isInteger(t="Must be a valid whole number"){let r=n=>l.isInteger(n);return new e("isInteger",t,r)}static set(t,r="Value must be one of [%v]"){let n=new Set(t.split(",").map(s=>s.trim().toLowerCase())),i=s=>s===""||n.has(s.toLowerCase());return e.createRule("set",r,i,t)}};var C=class e{constructor(t,r){this.rules=[],this.addAll(t),this.showrules=r}add(t){return Pt(this.rules,t.name)?!1:(this.rules.push(t),!0)}addAll(t){t&&t.forEach(r=>this.add(r))}validate(t,r){this.rules.forEach(n=>{let i=n.isValid(t);r(i,n.name)})}toHtml(){return this.rules.map(t=>t.toHtml()).join("")}static createFromAttributes(t){let r=[];return Mt(r,t),l.forEachEntry(t,(n,i)=>{if(!u.isEmpty(i)&&l.has(f,n)){let s=t[n+"-message"],o=f[n](i,s);o!==null&&r.push(o)}}),new e(r,t.showrules)}};function Mt(e,t){switch(t.type){case"email":return e.push(f.email(t["email-message"]));case"number":return e.push(f.isNumber(t["number-message"]));case"integer":return e.push(f.isInteger(t["integer-message"]));case"set":return e.push(f.set(t.options,t["set-message"]))}}function Pt(e,t){return!!e.find(n=>n.name===t)}var de=`
{cssFile}

<div class="input-field">
  <label for="{id}" class="label">
    <span class="superlabel {required} {tooltip}">
      {label} {tooltipIcon}
      <span class="tooltip-text">{tooltipText}</span>
    </span>
    <span class="sublabel">{sublabel}</span>
  </label>

  {input}

  <footer>
    <ul class="rules" style="display:{showrules};">{rules}</ul>
  </footer>
</div>
`;var I="required";function p(e,t,...r){return!Ut(e)||(e=JSON.parse(e),!Ft(e,t,...r))?!1:e}function Ut(e){return!l.isString(e)||u.isEmpty(e)?!1:(e=e.trim(),e.length!==0)}function Ft(e,t,...r){if(!Array.isArray(e.options)||e.options.length===0)return!1;let n=r.find(i=>!l.has(e,i));if(n)throw`${t} definition requires ${n} attribute`;return!0}function h(e,{label:t,value:r}){if(t===void 0&&r===void 0)throw`${e} definition requires at least a label or value`}function m(e,t){let r=e[t];return r?Dt(t,r)?I:`${t}="${r}"`:""}function Dt(e,t){return e!==I?!1:t===I||t==="true"}var zt=`
 <input id="{id}" type="{type}" class="input" value="{value}"
  {required} {minlength} {maxlength} {pattern}>
`,Bt="required";function me(e){let t={id:e.id,type:Jt(e),required:m(e,Bt),minlength:m(e,"minlength"),maxlength:m(e,"maxlength"),pattern:m(e,"pattern"),value:e.value||""};return u.replaceTemplate(zt,t,"{")}function Jt(e){let t=u.trim(e.type).toLowerCase();return t?t==="integer"?"number":t:"text"}var Gt=`
<label class="radio">
  <input type="radio" name="{name}" {id} value="{value}"{checked}>
  <span class="radio-label">{label}</span>
</label>
`;function pe(e){return e?Kt(e.innerHTML):""}function Kt(e){return e=p(e,"Radio","name"),e?`
<div class="radio-buttons">
${Qt(e)}
</div>
`:""}function Qt(e){let t=e.name,r=e.flow==="vertical"?`<br>
`:`
`;return e.options.map(n=>Xt(t,n)).join(r)}function Xt(e,t){h("Radio",t);let r={name:e,checked:t.checked?" checked":"",id:t.id?`id="${t.id}"`:"",value:t.value||t.label,label:t.label||t.value};return u.replaceTemplate(Gt.trim(),r,"{")}var Zt=`
<label class="checkbox">
  <input type="checkbox" {name} {id} value="{value}"{checked}>
  <span class="checkbox-label">{label}</span>
</label>
`;function he(e){return e?jt(e.innerHTML):""}function jt(e){return e=p(e,"Checkbox"),e?`
<div class="checkbox-buttons">
${er(e)}
</div>
`:""}function er(e){let t=e.flow==="vertical"?`<br>
`:`
`;return e.options.map(r=>tr(r)).join(t)}function tr(e){h("Checkbox",e);let t={name:e.name?`name="${e.name}"`:"",checked:e.checked?" checked":"",id:e.id?`id="${e.id}"`:"",value:e.value||e.label,label:e.label||e.value};return u.replaceTemplate(Zt.trim(),t,"{")}var M={select:'<select{name}{id}{size}{multiple} class="{widgetType}{multiple}">{options}</select>',group:'<optgroup label="{label}">{options}</optgroup>',option:"<option{disabled}{selected}{value}>{label}</option>"};function ge(e){return e?nr(e.innerHTML):""}function nr(e){if(e=p(e,"Listbox"),!e)return"";let t={name:e.name?` name="${e.name}"`:"",id:e.id?` id="${e.id}"`:"",size:e.size?` size="${e.size}"`:"",widgetType:ir(e),multiple:e.multiple?" multiple":"",options:be(e.options)};return u.replaceTemplate(M.select,t,"{")}function ir({multiple:e,size:t}){return e||t>1?"listbox":"combobox"}function sr(e){let t={label:e.label,options:be(e.options)};return u.replaceTemplate(M.group,t,"{")}function be(e){return Array.isArray(e)?e.map(r=>r.options?sr(r):or(r)).join(`
`):""}function or(e){h("Listbox",e);let t=e.value||e.label,r={disabled:e.disabled?" disabled":"",selected:e.selected?" selected":"",label:e.label||e.value,value:` value="${t}"`};return u.replaceTemplate(M.option,r,"{")}function ye(e,t){e.preventDefault();let r=a.first("select",t),n=r.scrollTop;ur(e.target),t.wi.actions._runValueChangeListeners(e.target.value),setTimeout(()=>{r.scrollTop=n})}function ur(e){e.selected=!e.selected,e.parentElement.focus()}function ve(e,t){let r=e.tooltip;r?(t.tooltip="tooltip",t.tooltipIcon='<span class="circle">?</span>',t.tooltipText=r):(t.tooltip="",t.tooltipIcon="",t.tooltipText="")}var w="|",xe="^",Ae=xe+w,lr=e=>String(e).replaceAll(w,Ae),we=e=>e.replaceAll(Ae,w);function cr(e){return l.isNil(e)?"":Array.isArray(e)?e.map(t=>lr(t)).join(w):String(e)}function Se(e){if(u.isEmpty(e))return[];let t=[],r="",n="";return Array.from(e).forEach(i=>{i===w&&r!==xe?(t.push(we(n)),n=""):n+=i,r=i}),t.push(we(n)),t}function P(e){let t=u.trim(e.getAttribute("type")).toLowerCase();return t==="checkbox"||t==="listbox"}function Ee(e,t){let r=new Set(e),n=new Set(t);if(r.size!==n.size)return!1;for(let i of r)if(!n.has(i))return!1;return!0}function fr(e,t,r){return r?Ee(e,t):e===t}function dr(e){let t=e.getAttribute("value");return P(e)?Se(t):t}function Le(e,t){let r=P(e);fr(dr(e),t,r)||(r&&(t=cr(t)),e.setAttribute("value",t,!0))}function mr(e){return e.wi.properties.value}function pr(e,t){P(e)&&(t=Se(t),Ee(mr(e),t))||(e.wi.properties.value=t)}function Te(e){let t=e.setAttribute.bind(e);e.setAttribute=function(r,n,i){if(r!=="value"){t(r,n);return}n=String(n),i||pr(e,n),t(r,n)}}function gr(e=""){ae({nameWithDash:"input-field",html:t=>{let r=br(t);return t.validationRules=C.createFromAttributes(r),t.valueChangeListeners=[],Te(t),vr(t,r,e)},propertyList:[{name:"value",sel:"input, select",onChange:(t,r,n)=>O(t,n)}],eventHandlerList:[{sel:"label .tooltip",eventName:"click",listener:(t,r)=>{a.first("label .tooltip-text",r).classList.toggle("show")}},{sel:'input:not([type="checkbox"]), select',eventName:"input",listener:(t,r)=>O(r,t.target.value)},{sel:'input[type="checkbox"]',eventName:"input",listener:(t,r)=>O(r,r.wi.properties.value)},{sel:"select.listbox.multiple option",eventName:"mousedown",listener:(t,r)=>{ye(t,r),O(r,r.wi.properties.value)}}],actionList:[{name:"addRule",action:function(t,r,n){let i=new f(t,r,n);this.validationRules.add(i)&&Lr(this,i)}},{name:"getRuleValidState",action:function(t){let r=a.first("footer ul.rules",this),n=a.first(`li.validation-${t}`,r);return n===null?null:!n.classList.contains("bad")}},{name:"setRuleValidState",action:function(t,r){let n=a.first("footer ul.rules",this),i=a.first(`li.validation-${t}`,n);a.classPresentIf(i,"bad",!r);let s=a.first(".input-field",this),o=a.first("li.bad",n);a.classPresentIf(s,"bad",o!==null)}},{name:"addValueChangeListener",action:function(t){this.valueChangeListeners.push(t)}},{name:"_runValueChangeListeners",action:function(t){let r=this;r.valueChangeListeners.forEach(n=>{n(r,t)})}},{name:"isValid",action:function(){let t=this;return Ce(t,t.wi.properties.value),!a.first(".input-field",t).classList.contains("bad")}}]})}function O(e,t){Le(e,t),Ce(e,t),e.wi.actions._runValueChangeListeners(t)}function br(e){let t=a.getAttributes(e),r={};return l.forEachEntry(t,(n,i)=>{r[n.toLowerCase()]=i}),r.showrules=yr(r),r}function yr(e){let t=u.trim(e.showrules).toLowerCase();return t==="false"||t==="onerror"?t:"true"}function vr(e,t,r){let i={input:wr(e,t),id:t.id,cssFile:Ar(r),label:t.label,sublabel:Sr(t),required:m(t,"required"),showrules:t.showrules==="true"?"":"none",rules:e.validationRules.toHtml()};return ve(t,i),u.replaceTemplate(de,i,"{")}function wr(e,t){let r=xr(t);return r==="radio"?pe(e):r==="checkbox"?he(e):r==="listbox"?ge(e):me(t)}function xr(e){let t=u.trim(e.type).toLowerCase();return t?t==="integer"?"number":t:"text"}function Ar(e){return u.isEmpty(e)?"":`<link rel="stylesheet" type="text/css" href="${e}">`}function Sr(e){let t=e.sublabel;return t?`<br>${t}`:""}function Ce(e,t){let r=a.first("footer ul.rules",e),n=!0;e.validationRules.validate(t,(s,o)=>{let c=a.first(`li.validation-${o}`,r);a.classPresentIf(c,"bad",!s),n=n&&s}),Er(e,r,n);let i=a.first(".input-field",e);a.classPresentIf(i,"bad",!n)}function Er(e,t,r){if(e.validationRules.showrules!=="onerror")return;let n=r?"none":"";t.setAttribute("style",`display:${n};`)}function Lr(e,t){let r=a.first("footer ul.rules",e);a.add(r,t.toHtml())}return We(Tr);})();
//# sourceMappingURL=input-field-script-min.js.map
